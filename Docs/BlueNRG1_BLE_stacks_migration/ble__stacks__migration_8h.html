<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>BLE stack migration guidelines from v1.x to v2.x and from v2.0 to v2.1x: ble_stacks_migration.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="STcustom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ST-logo-small.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BLE stack migration guidelines from v1.x to v2.x and from v2.0 to v2.1x
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ble_stacks_migration.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h1><a class="anchor" id="Introduction"></a>
Introduction</h1>
<p>This document describes the migration steps from Bluetooth Low Energy stack v1.x to <b>BlueNRG-BLE Stack Library</b> v2.x and from <b>BlueNRG-BLE Stack Library</b> v2.0 to <b>BlueNRG-BLE Stack Library</b> v2.1x in terms of new APIs, events callbacks and new initialization parameters.<br />
 Further, it describes the main and most used APIs, events callbacks and parameters which have been modified/added from BLE stack v1.x to v2.x. For detailed information about each API, event callback and related parameters please refer to the BLE stack APIs, events callbacks doxygen documentation.</p>
<h1><a class="anchor" id="BlueNRG1_APIs_Events"></a>
BLE stack v1.x to v2.x Migration Table</h1>
<table  id="DoxyEmbeddedTable" border="1">
<tr id="HeadRow">
<td id="FirstColumn"><b>API/Event/Initialization Parameters</b></td><td id="MiddleColumn"><b>Present in v1.x</b></td><td id="MiddleColumn"><b>Present in v2.x</b></td><td id="MiddleColumn"><b>Description</b></td><td id="LastColumn"><b>Notes</b> </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">BlueNRG_Stack_Initialization_t: total_buffer_size</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">TOTAL_BUFFER_SIZE return value</td><td id="LastColumn">Refer to bluenrg1_stack.h file doxygen doc </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">BlueNRG_Stack_Initialization_t: extended_packet_length_enable</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Set it to 0 (reserved for future use)</td><td id="LastColumn">Refer to bluenrg1_stack.h file doxygen doc </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">BlueNRG_Stack_Initialization_t: prWriteListSize</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Prepare Write List size</td><td id="LastColumn">Refer to bluenrg1_stack.h file doxygen doc </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">BlueNRG_Stack_Initialization_t: mblockCount</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Number of allocated memory blocks used by BLE stack memory manager</td><td id="LastColumn">Refer to bluenrg1_stack.h file doxygen doc </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">BlueNRG_Stack_Initialization_t: attMtu</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Maximum supported ATT_MTU size</td><td id="LastColumn">Refer to bluenrg1_stack.h file doxygen doc </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">hci_le_read_local_p256_public_key()</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New API for BLE v4.2 LE Secure Connections </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">hci_le_generate_dhkey()</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New API for BLE v4.2 LE Secure Connections </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">hci_le_add_device_to_resolving_list()</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New API for BLE v4.2 Privacy 1.2 </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">hci_le_remove_device_from_resolving_list()</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New API for BLE v4.2 Privacy 1.2 </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">hci_le_clear_resolving_list()</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New API for BLE v4.2 Privacy 1.2 </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">hci_le_read_resolving_list_size()</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New API for BLE v4.2 Privacy 1.2 </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">hci_le_read_peer_resolvable_address()</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New API for BLE v4.2 Privacy 1.2 </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">hci_le_read_local_resolvable_address()</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New API for BLE v4.2 Privacy 1.2 </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">hci_le_set_address_resolution_enable()</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New API for BLE v4.2 Privacy 1.2 </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">hci_le_set_resolvable_private_address_timeout()</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New API for BLE v4.2 Privacy 1.2 </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_hal_set_event_mask()</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New API: it is used to enable/disable generation of HAL events </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gatt_deny_read()</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New API: deny the GATT server to send a response to a read request from a client. </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gap_numeric_comparison_value_confirm_yesno()</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New API for BLE v4.2 LE Secure Connections </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gap_passkey_input()</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New API for BLE v4.2 LE Secure Connections </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gap_get_oob_data()</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New API for BLE v4.2 LE Secure Connections </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gap_set_oob_data()</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New API for BLE v4.2 LE Secure Connections </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gap_add_devices_to_resolving_list()</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New API for BLE v4.2 Privacy 1.2 </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gap_init()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Updated parameters: refer to API doxygen doc</td><td id="LastColumn">Updated privacy_enabled parameter ranges for BLE v4.2 Privacy 1.2 </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gap_set_authentication_requirement()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Updated parameters: refer to API doxygen doc</td><td id="LastColumn">New API interface: is not backward compatible </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gap_get_security_level()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Updated parameters: refer to API doxygen doc</td><td id="LastColumn">New API interface: is not backward compatible </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gap_slave_security_req()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Updated parameters: refer to API doxygen doc</td><td id="LastColumn">New API interface: is not backward compatible </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gatt_update_char_value_ext()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Updated parameters: refer to API doxygen doc</td><td id="LastColumn">New API interface: is not backward compatible </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gap_set_discoverable()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Updated parameters: refer to API doxygen doc</td><td id="LastColumn">New Own_Address_Type parameter values range ; Advertising_Filter_Policy sets to 0 (not used by BLE stack v2.x) </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gap_set_limited_discoverable()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Updated parameters: refer to API doxygen doc</td><td id="LastColumn">New Own_Address_Type parameter values range; Advertising_Filter_Policy sets to 0 (not used by BLE stack v2.x) </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gap_set_direct_connectable()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Updated parameters: refer to API doxygen doc</td><td id="LastColumn">New Own_Address_Type parameter values range </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gap_set_undirected_connectable()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Updated parameters: refer to API doxygen doc</td><td id="LastColumn">New Own_Address_Type parameter values rang; added new parameters: Advertising_Interval_Min, Advertising_Interval_Max; inverted order of Own_Address_Type and Adv_Filter_Policy parameters. </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gap_set_non_connectable()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Updated parameters: refer to API doxygen doc</td><td id="LastColumn">New Own_Address_Type parameter values range </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gap_start_observation_proc()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Updated parameters: refer to API doxygen doc</td><td id="LastColumn">New Own_Address_Type parameter values range; added new parameter Scanning_Filter_Policy </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gap_start_general_connection_establish_proc()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Updated parameters: refer to API doxygen doc</td><td id="LastColumn">New Own_Address_Type parameter values range; added new parameter Scanning_Filter_Policy </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gap_start_selective_connection_establish_proc()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Updated parameters: refer to API doxygen doc</td><td id="LastColumn">New Own_Address_Type parameter values range ; added new parameter Scanning_Filter_Policy </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gap_start_auto_connection_establish_proc()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Updated parameters: refer to API doxygen doc</td><td id="LastColumn">New Own_Address_Type parameter values range </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gap_create_connection()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Updated parameters: refer to API doxygen doc</td><td id="LastColumn">New Own_Address_Type parameter values range </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gap_start_general_discovery_proc()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Updated parameters: refer to API doxygen doc</td><td id="LastColumn">New Own_Address_Type parameter values range </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gap_start_limited_discovery_proc()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Updated parameters: refer to API doxygen doc</td><td id="LastColumn">New Own_Address_Type parameter values range </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gap_start_name_discovery_proc()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Updated parameters: refer to API doxygen doc</td><td id="LastColumn">New Own_Address_Type parameter values range </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">hci_le_create_connection()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Updated parameters: refer to API doxygen doc</td><td id="LastColumn">New Own_Address_Type parameter values range </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">hci_le_set_advertising_parameters()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Updated parameters: refer to API doxygen doc</td><td id="LastColumn">New Own_Address_Type parameter values range </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">hci_le_set_scan_parameters()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Updated parameters: refer to API doxygen doc</td><td id="LastColumn">New Own_Address_Type parameter values range </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">hci_le_set_data_length()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New API for extended packet length (BlueNRG-2, BLE stack v2.1) </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">hci_le_read_suggested_default_data_length()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New API for extended packet length (BlueNRG-2, BLE stack v2.1) </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">hci_le_write_suggested_default_data_length()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New API for extended packet length (BlueNRG-2, BLE stack v2.1) </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">hci_le_read_maximum_data_length()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New API for extended packet length (BlueNRG-2, BLE stack v2.1) </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gatt_set_access_permission()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New API for setting access permission for the attribute handle specified (BLE stack v2.1) </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_hal_tone_start()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Updated parameters: refer to API doxygen doc</td><td id="LastColumn">Added new offset parameter (BLE stack v2.1) </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gap_remove_bonding_record()</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New API (BLE stack v2.1) </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gatt_update_char_value()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">Deprecated API on BLE stack v2.1 </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">ACI_HAL_TRANSMITTER_TEST_PACKETS()</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New API supported only in network coprocessor mode (DTM application (BLE stack v2.1x) </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">hci_le_read_local_p256_public_key_complete_event</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to event doxygen doc</td><td id="LastColumn">New event for BLE v4.2 LE Secure Connections </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">hci_le_generate_dhkey_complete_event</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to event doxygen doc</td><td id="LastColumn">New event for BLE v4.2 LE Secure Connections </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">hci_le_enhanced_connection_complete_event</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to event doxygen doc</td><td id="LastColumn">New event for BLE v4.2 LE Secure Connections </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">hci_le_direct_advertising_report_event</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to event doxygen doc</td><td id="LastColumn">New event for BLE v4.2 LE Secure Connections </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gap_numeric_comparison_value_event</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to event doxygen doc</td><td id="LastColumn">New event for BLE v4.2 LE Secure Connections </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gap_keypress_notification_event</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to event doxygen doc</td><td id="LastColumn">New event for BLE v4.2 LE Secure Connections </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_hal_scan_req_report_event</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to event doxygen doc</td><td id="LastColumn">New event for reporting to the application the reception of a scan request and the schedule of a scan response transmission (event is disabled by default: it can be enabled with aci_hal_set_event_mask()) </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gap_pairing_complete_event()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Updated parameters: refer to event doxygen doc</td><td id="LastColumn">Added new Reason parameter </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gatt_attribute_modified_event()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Updated parameters: refer to event doxygen doc</td><td id="LastColumn">Parameter Attr_Data_Length is 2 bytes size </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">hci_le_data_length_change_event()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to event doxygen doc</td><td id="LastColumn">New event for extended packet length (BlueNRG-2, BLE stack v2.1) </td></tr>
<tr id="LastRow">
<td id="FirstColumn">aci_hal_fw_error_event()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to event doxygen doc</td><td id="LastColumn">New event for reporting firmware error informations. (BLE stack v2.1) </td></tr>
</table>
<p>NOTEs:</p><ul>
<li>BlueNRG-1 BLE stack v2.x uses the Public Key Cryptography (PKA) features for addressing the LE Secure Connections. The related peripheral driver must added to the BLE demonstration application framework (file BlueNRG-1 DK xxx\Library\BlueNRG1_Periph_Driver\BlueNRG1_pka.c).</li>
<li>Please refer to BlueNRG-1 BLE stack v2.x APIs/events and parameters doxygen documentation for detailed description.</li>
</ul>
<h1><a class="anchor" id="BlueNRG_Stack_Initialization_t"></a>
BLE Radio Initialization Parameters v1.x to v2.x migration guideline table for BlueNRG_Stack_Initialization_t structure</h1>
<table  id="DoxyEmbeddedTable" border="1">
<tr id="HeadRow">
<td id="FirstColumn"><b>Initialization Structure</b></td><td id="MiddleColumn"><b>Parameter</b></td><td id="MiddleColumn"><b>Present in v1.x</b></td><td id="MiddleColumn"><b>Present in v2.x</b></td><td id="MiddleColumn"><b>Description</b></td><td id="LastColumn"><b>Notes</b> </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">BlueNRG_Stack_Initialization_t</td><td id="MiddleColumn">bleStartFlashAddress</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">secDbSize</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">serverDbSize</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">stored_device_id_data_p</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">bleStartRamAddress</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">total_buffer_size</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New parameter on v2.x </td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">numAttrRecord</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">numAttrServ</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">attrValueArrSize</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">numOfLinks</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">extended_packet_length_enable</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New parameter on v2.x (reserved for future use: to be set to 0) </td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">prWriteListSize</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New parameter on v2.x </td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">mblockCount</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New parameter on v2.x </td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">attMtu</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New parameter on v2.x </td></tr>
<tr id="LastRow">
<td id="FirstColumn"></td><td id="MiddleColumn">hardware_config</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
</table>
<p>NOTEs: The BlueNRG_Stack_Initialization_t parameters can be properly configured using the BlueNRG-1 Radio Initialization Parameters Wizard.</p>
<h1><a class="anchor" id="BLE_Examples"></a>
BLE Radio Initialization Parameters v2.0 to v2.1x migration guideline table for BlueNRG_Stack_Initialization_t structure values</h1>
<table  id="DoxyEmbeddedTable" border="1">
<tr id="HeadRow">
<td id="FirstColumn"><b>Initialization Structure</b></td><td id="MiddleColumn"><b>Parameter</b></td><td id="MiddleColumn"><b>v2.0 initialization value</b></td><td id="MiddleColumn"><b>v2.1 initialization value</b></td><td id="LastColumn"><b>v2.1 vs v2.0 Changes</b> </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">BlueNRG_Stack_Initialization_t</td><td id="MiddleColumn">bleStartFlashAddress</td><td id="MiddleColumn">(uint8_t*)stacklib_flash_data</td><td id="MiddleColumn">(uint8_t*)stacklib_flash_data</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">secDbSize</td><td id="MiddleColumn">FLASH_SEC_DB_SIZE</td><td id="MiddleColumn">FLASH_SEC_DB_SIZE</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">serverDbSize</td><td id="MiddleColumn">FLASH_SERVER_DB_SIZE</td><td id="MiddleColumn">FLASH_SERVER_DB_SIZE</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">stored_device_id_data_p</td><td id="MiddleColumn">(uint8_t*)stacklib_stored_device_id_data</td><td id="MiddleColumn">(uint8_t*)stacklib_stored_device_id_data</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">bleStartRamAddress</td><td id="MiddleColumn">(uint8_t*)dyn_alloc_a</td><td id="MiddleColumn">(uint8_t*)dyn_alloc_a</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">total_buffer_size</td><td id="MiddleColumn">TOTAL_BUFFER_SIZE(NUM_LINKS,NUM_GATT_ATTRIBUTES,NUM_GATT_SERVICES,ATT_VALUE_ARRAY_SIZE,PCKT_COUNT)</td><td id="MiddleColumn">TOTAL_BUFFER_SIZE(NUM_LINKS,NUM_GATT_ATTRIBUTES,NUM_GATT_SERVICES,ATT_VALUE_ARRAY_SIZE,MBLOCKS_COUNT,CONTROLLER_DATA_LENGTH_EXTENSION_ENABLED)</td><td id="LastColumn">MBLOCKS_COUNT,CONTROLLER_DATA_LENGTH_EXTENSION_ENABLED parameters </td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">numAttrRecord</td><td id="MiddleColumn">NUM_GATT_ATTRIBUTES</td><td id="MiddleColumn">NUM_GATT_ATTRIBUTES</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">numAttrServ</td><td id="MiddleColumn">NUM_GATT_SERVICES</td><td id="MiddleColumn">NUM_GATT_SERVICES</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">attrValueArrSize</td><td id="MiddleColumn">ATT_VALUE_ARRAY_SIZE</td><td id="MiddleColumn">ATT_VALUE_ARRAY_SIZE</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">numOfLinks</td><td id="MiddleColumn">NUM_LINKS</td><td id="MiddleColumn">NUM_LINKS</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">extended_packet_length_enable</td><td id="MiddleColumn">0</td><td id="MiddleColumn">0</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">prWriteListSize</td><td id="MiddleColumn">PREPARE_WRITE_LIST_SIZE</td><td id="MiddleColumn">PREPARE_WRITE_LIST_SIZE</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">mblockCount</td><td id="MiddleColumn">PCKT_COUNT</td><td id="MiddleColumn">MBLOCKS_COUNT</td><td id="LastColumn">MBLOCKS_COUNT parameter </td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">attMtu</td><td id="MiddleColumn">MAX_ATT_MTU</td><td id="MiddleColumn">MAX_ATT_MTU</td><td id="LastColumn"></td></tr>
<tr id="LastRow">
<td id="FirstColumn"></td><td id="MiddleColumn">hardware_config</td><td id="MiddleColumn">CONFIG_TABLE</td><td id="MiddleColumn">CONFIG_TABLE</td><td id="LastColumn"></td></tr>
</table>
<p>NOTEs:</p><ul>
<li>The BlueNRG_Stack_Initialization_t parameters can be properly configured using the BlueNRG-1 Radio Initialization Parameters Wizard.</li>
</ul>
<h1><a class="anchor" id="BLE_2_1"></a>
BLE stack v2.0 to v2.1x SDK framework migration guideline table</h1>
<table  id="DoxyEmbeddedTable" border="1">
<tr id="HeadRow">
<td id="FirstColumn"><b>Folder/File</b></td><td id="MiddleColumn"><b>Present in v2.0</b></td><td id="MiddleColumn"><b>Present in v2.1</b></td><td id="MiddleColumn"><b>Description</b></td><td id="LastColumn"><b>Notes</b> </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">Library\BLE_Application</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">BLE application framework (utilities, OTA FW upgrade, master/central library, application layers interface)</td><td id="LastColumn">To be added on IDE projects include directories </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">Library\Bluetooth_LE\src\stack_user_cfg.[ch]</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Configuration files allowing BLE stack v2.1 modular options support</td><td id="LastColumn">To be added on IDE projects </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">Library\src: stack_dle_api_stubs.c, stack_priv_api_stubs.c, stack_sc_api_stubs.c, stack_slvonly_api_stubs.c</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">BLE stack v2.1 stubs files for DTM application</td><td id="LastColumn">To be added on DTM IDE projects </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">Library\cryptolib\libcrypto.a</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Library providing AES APIs required by BLE stack v2.1</td><td id="LastColumn">To be added on IDE projects </td></tr>
<tr id="LastRow">
<td id="FirstColumn">Library\hal\src\miscutils.c</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Utilities file</td><td id="LastColumn">To be added on IDE projects </td></tr>
</table>
<h1><a class="anchor" id="BlueNRG1_APIs_1"></a>
BLE stack v1.x to v2.x migration guideline table for aci_gap_init() API</h1>
<table  id="DoxyEmbeddedTable" border="1">
<tr id="HeadRow">
<td id="FirstColumn"><b>API</b></td><td id="MiddleColumn"><b>Parameter</b></td><td id="MiddleColumn"><b>Present in v1.x</b></td><td id="MiddleColumn"><b>Present in v2.x</b></td><td id="MiddleColumn"><b>Description</b></td><td id="LastColumn"><b>Notes</b> </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gap_init()</td><td id="MiddleColumn">Role</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">No change compared to v1.x </td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">privacy_enabled</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">Added parameter value 0x02: controller privacy (Privacy 1.2) </td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">device_name_char_len</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">No change compared to v1.x </td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">Service_Handle</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">No change compared to v1.x </td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">Dev_Name_Char_Handle</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">No change compared to v1.x </td></tr>
<tr id="LastRow">
<td id="FirstColumn"></td><td id="MiddleColumn">Appearance_Char_Handle</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">No change compared to v1.x </td></tr>
</table>
<p>NOTEs: If controller privacy is enabled, the 32MHz high speed crystal must be used.</p>
<h1><a class="anchor" id="BlueNRG1_APIs"></a>
BLE stack v1.x to v2.x migration guideline table for aci_gap_set_authentication_requirement() API</h1>
<table  id="DoxyEmbeddedTable" border="1">
<tr id="HeadRow">
<td id="FirstColumn"><b>API</b></td><td id="MiddleColumn"><b>Parameter</b></td><td id="MiddleColumn"><b>Present in v1.x</b></td><td id="MiddleColumn"><b>Present in v2.x</b></td><td id="MiddleColumn"><b>Description</b></td><td id="LastColumn"><b>Notes</b> </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gap_set_authentication_requirement()</td><td id="MiddleColumn">Bonding_Mode</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">First parameter on v2.x </td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">MITM_Mode</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">SC_Support</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">Secure connection support </td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">KeyPress_Notification_Support</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">Keypress notification support </td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">Min_Encryption_Key_Size</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">Max_Encryption_Key_Size</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">Use_Fixed_Pin</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">Fixed_Pin</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="LastRow">
<td id="FirstColumn"></td><td id="MiddleColumn">Identity_Address_Type</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">Identity Address Type </td></tr>
</table>
<h1><a class="anchor" id="BlueNRG1_APIs_3"></a>
BLE APIs v1.x to v2.x migration guideline table for aci_gap_get_security_level() API</h1>
<table  id="DoxyEmbeddedTable" border="1">
<tr id="HeadRow">
<td id="FirstColumn"><b>API</b></td><td id="MiddleColumn"><b>Parameter</b></td><td id="MiddleColumn"><b>Present in v1.x</b></td><td id="MiddleColumn"><b>Present in v2.x</b></td><td id="MiddleColumn"><b>Description</b></td><td id="LastColumn"><b>Notes</b> </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gap_get_security_level()</td><td id="MiddleColumn">Connection_Handle</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New API prototype for v2.x </td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">*Security_Mode</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New API prototype for v2.x </td></tr>
<tr id="LastRow">
<td id="FirstColumn"></td><td id="MiddleColumn">*Security_Level</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New API prototype for v2.x </td></tr>
</table>
<ul>
<li>NOTEs : Exiting API version used on BLE stack v1.x has been deprecated: new API gets the current security level of a specified connection.</li>
</ul>
<h1><a class="anchor" id="BlueNRG1_APIs_4"></a>
BLE APIs v1.x to v2.x migration guideline table for aci_gap_slave_security_req() API</h1>
<table  id="DoxyEmbeddedTable" border="1">
<tr id="HeadRow">
<td id="FirstColumn"><b>API</b></td><td id="MiddleColumn"><b>Parameter</b></td><td id="MiddleColumn"><b>Present in v1.x</b></td><td id="MiddleColumn"><b>Present in v2.x</b></td><td id="MiddleColumn"><b>Description</b></td><td id="LastColumn"><b>Notes</b> </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gap_slave_security_req()</td><td id="MiddleColumn">Connection_Handle</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">Only 1 parameter on v2.x </td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">Bonding</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">Only 1 parameter on v2.x </td></tr>
<tr id="LastRow">
<td id="FirstColumn"></td><td id="MiddleColumn">MITM_Protection</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">Only 1 parameter on v2.x </td></tr>
</table>
<ul>
<li>NOTEs : All other parameters present on BLE stack v1.x have been removed since they are already specified on aci_gap_set_authentication_requirement() API.</li>
</ul>
<h1><a class="anchor" id="BlueNRG1_APIs_5"></a>
BLE APIs v1.x to v2.x migration guideline table for aci_gatt_update_char_value_ext() API</h1>
<table  id="DoxyEmbeddedTable" border="1">
<tr id="HeadRow">
<td id="FirstColumn"><b>API</b></td><td id="MiddleColumn"><b>Parameter</b></td><td id="MiddleColumn"><b>Present in v1.x</b></td><td id="MiddleColumn"><b>Present in v2.x</b></td><td id="MiddleColumn"><b>Description</b></td><td id="LastColumn"><b>Notes</b> </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gatt_update_char_value_ext()</td><td id="MiddleColumn">Conn_Handle_To_Notify</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New parameter on v2.x (Notify all subscribed clients if equal to 0x0000: DEPRECATED feature on BLE stack v2.1) </td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">Service_Handle</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">Char_Handle</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">Update_Type</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">Char_Length</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">Value_Offset</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">Value_Length</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="LastRow">
<td id="FirstColumn"></td><td id="MiddleColumn">Value</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
</table>
<ul>
<li>NOTEs : New Conn_Handle_To_Notify parameter allows to select the specific GATT client to which send the characteristic notification.</li>
</ul>
<h1><a class="anchor" id="BlueNRG1_APIs_6"></a>
BLE APIs v1.x to v2.x migration guideline table for aci_gap_set_undirected_connectable() API</h1>
<table  id="DoxyEmbeddedTable" border="1">
<tr id="HeadRow">
<td id="FirstColumn"><b>API</b></td><td id="MiddleColumn"><b>Parameter</b></td><td id="MiddleColumn"><b>Present in v1.x</b></td><td id="MiddleColumn"><b>Present in v2.x</b></td><td id="MiddleColumn"><b>Description</b></td><td id="LastColumn"><b>Notes</b> </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gap_set_undirected_connectable()</td><td id="MiddleColumn">Advertising_Interval_Min</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New parameter on v2.x </td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">Advertising_Interval_Max</td><td id="MiddleColumn">NO</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New parameter on v2.x </td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">Own_Address_Type</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="LastRow">
<td id="FirstColumn"></td><td id="MiddleColumn">Adv_Filter_Policy</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
</table>
<ul>
<li>NOTEs :<ul>
<li>Order of Own_Address_Type and Adv_Filter_Policy parameters is inverted vs BLE stack v1.x.</li>
<li>Refer to Own_Address_Type parameter migration table guideline for more details.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="BlueNRG1_Events_1"></a>
BLE Events Callbacks v1.x to v2.x migration guideline table for aci_gap_pairing_complete_event() event</h1>
<table  id="DoxyEmbeddedTable" border="1">
<tr id="HeadRow">
<td id="FirstColumn"><b>Event callback</b></td><td id="MiddleColumn"><b>Parameter</b></td><td id="MiddleColumn"><b>Present in v1.x</b></td><td id="MiddleColumn"><b>Present in v2.x</b></td><td id="MiddleColumn"><b>Description</b></td><td id="LastColumn"><b>Notes</b> </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gap_pairing_complete_event()</td><td id="MiddleColumn">Connection_Handle</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">Status</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="LastRow">
<td id="FirstColumn"></td><td id="MiddleColumn">Reason</td><td id="MiddleColumn">No</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">New parameter on v2.x </td></tr>
</table>
<ul>
<li>NOTEs : New Reason parameter provides the pariring reason error code.</li>
</ul>
<h1><a class="anchor" id="BlueNRG1_Events_2"></a>
BLE Events Callbacks v1.x to v2.x migration guideline table for aci_gatt_attribute_modified_event() event</h1>
<table  id="DoxyEmbeddedTable" border="1">
<tr id="HeadRow">
<td id="FirstColumn"><b>Event callback</b></td><td id="MiddleColumn"><b>Parameter</b></td><td id="MiddleColumn"><b>Present in v1.x</b></td><td id="MiddleColumn"><b>Present in v2.x</b></td><td id="MiddleColumn"><b>Description</b></td><td id="LastColumn"><b>Notes</b> </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">aci_gatt_attribute_modified_event()</td><td id="MiddleColumn">Connection_Handle</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">Attr_Handle</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">Offset</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">Attr_Data_Length</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">2 bytes size </td></tr>
<tr id="LastRow">
<td id="FirstColumn"></td><td id="MiddleColumn">Attr_Data</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
</table>
<ul>
<li>NOTEs : Attr_Data_Length parameter is now defined as 2 bytes size.</li>
</ul>
<h1><a class="anchor" id="BlueNRG1_Parameters_1"></a>
BLE APIs parameters v1.x to v2.x migration guideline table for Own_Address_Type parameter range values</h1>
<table  id="DoxyEmbeddedTable" border="1">
<tr id="HeadRow">
<td id="FirstColumn"><b>Parameter</b></td><td id="MiddleColumn"><b>API</b></td><td id="MiddleColumn"><b>Present in v1.x</b></td><td id="MiddleColumn"><b>Present in v2.x</b></td><td id="MiddleColumn"><b>Description</b></td><td id="LastColumn"><b>Notes</b> </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">Own_Address_Type</td><td id="MiddleColumn">aci_gap_set_discoverable()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">aci_gap_set_limited_discoverable()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">aci_gap_set_direct_connectable()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">aci_gap_set_undirected_connectable()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">aci_gap_set_non_connectable()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">aci_gap_start_observation_proc()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">aci_gap_start_general_connection_establish_proc()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">aci_gap_start_selective_connection_establish_proc()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">aci_gap_start_auto_connection_establish_proc()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">aci_gap_create_connection()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">aci_gap_start_general_discovery_proc()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">aci_gap_start_limited_discovery_proc()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">aci_gap_start_name_discovery_proc()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">hci_le_create_connection()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">hci_le_set_advertising_parameters()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="LastRow">
<td id="FirstColumn"></td><td id="MiddleColumn">hci_le_set_scan_parameters()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
</table>
<ul>
<li>NOTEs : ON BLE stack v2.x Own_Address_Type parameter value ranges has been extended as follow (refer to API doxygen for details about when each value is allowed):<ul>
<li>0x00 : 'Public Device Address'</li>
<li>0x01 : 'Random Device Address',</li>
<li>0x02 : 'Resolvable Private Address'</li>
<li>0x03 : 'Resolvable Private Address'</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="BlueNRG1_Parameters_2"></a>
BLE APIs parameters v1.x to v2.x migration guideline table for Advertising_Filter_Policy parameter</h1>
<table  id="DoxyEmbeddedTable" border="1">
<tr id="HeadRow">
<td id="FirstColumn"><b>Parameter</b></td><td id="MiddleColumn"><b>API</b></td><td id="MiddleColumn"><b>Present in v1.x</b></td><td id="MiddleColumn"><b>Present in v2.x</b></td><td id="MiddleColumn"><b>Description</b></td><td id="LastColumn"><b>Notes</b> </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">Advertising_Filter_Policy</td><td id="MiddleColumn">aci_gap_set_discoverable()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">Set to 0: not used inside the BLE stack v2.x </td></tr>
<tr id="LastRow">
<td id="FirstColumn"></td><td id="MiddleColumn">aci_gap_set_limited_discoverable()</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn">Set to 0: not used inside the BLE stack v2.x </td></tr>
</table>
<h1><a class="anchor" id="BlueNRG1_Parameters_3"></a>
BLE APIs parameters v1.x to v2.x migration guideline table for Scanning_Filter_Policy parameter</h1>
<table  id="DoxyEmbeddedTable" border="1">
<tr id="HeadRow">
<td id="FirstColumn"><b>Parameter</b></td><td id="MiddleColumn"><b>API</b></td><td id="MiddleColumn"><b>Present in v1.x</b></td><td id="MiddleColumn"><b>Present in v2.x</b></td><td id="MiddleColumn"><b>Description</b></td><td id="LastColumn"><b>Notes</b> </td></tr>
<tr id="BodyRow">
<td id="FirstColumn">Scanning_Filter_Policy</td><td id="MiddleColumn">aci_gap_start_observation_proc()</td><td id="MiddleColumn">NO</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="BodyRow">
<td id="FirstColumn"></td><td id="MiddleColumn">aci_gap_start_general_connection_establish_proc()</td><td id="MiddleColumn">NO</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
<tr id="LastRow">
<td id="FirstColumn"></td><td id="MiddleColumn">aci_gap_start_selective_connection_establish_proc()</td><td id="MiddleColumn">NO</td><td id="MiddleColumn">Yes</td><td id="MiddleColumn">Refer to API doxygen doc</td><td id="LastColumn"></td></tr>
</table>
<h1><a class="anchor" id="BlueNRG1_Error_Codes"></a>
BLE stack  v2.1x error codes</h1>
<ul>
<li>BLE stack v2.1x error code policy is as follows (refer to file ble_status.h):<ul>
<li>The Standard Error Codes, as specified by the Bluetooth Specifications Vol.2, Part D ("Error Codes")) and related to the Controller, are the ones with prefix BLE_ERROR (range from 0x00 to 0x3F).</li>
<li>The Generic/System error codes reported by the different Protocol layers (Host), are the ones with prefix BLE_STATUS (they start with 0x40).</li>
<li>Some GAP layer APIs could return Controller error codes (prefix BLE_ERROR) since they directly interface to the Controller.</li>
<li>The <a href="./BlueNRG-1_2_BLE_stack_v2_1_Error_codes.xlsx">APIs error codes </a> table is provided in order to have a list of all possible error codes returned by the BLE stack v2.1x APIs. </li>
</ul>
</li>
</ul>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Copyright &copy; 2020 by STMicrolectronics. All rights reserved.<br>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
