<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>BlueNRG-1,2 HAL and startup drivers APIs: sleep.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="STcustom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ST-logo-small.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BlueNRG-1,2 HAL and startup drivers APIs
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">sleep.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Header file for BlueNRG-1,2 Sleep management.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;bluenrg_x_device.h&quot;</code><br />
</div>
<p><a href="sleep_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a56b318174ac7af7e01778be3d2e5810e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sleep_8h.html#a56b318174ac7af7e01778be3d2e5810e">WAKEUP_IO9</a>&#160;&#160;&#160;0x0001</td></tr>
<tr class="memdesc:a56b318174ac7af7e01778be3d2e5810e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wakeup source IO9 Mask.  <a href="#a56b318174ac7af7e01778be3d2e5810e">More...</a><br /></td></tr>
<tr class="separator:a56b318174ac7af7e01778be3d2e5810e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae586ae1d0b4f633f9a23bd7ec23d33ee"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sleep_8h.html#ae586ae1d0b4f633f9a23bd7ec23d33ee">WAKEUP_IO10</a>&#160;&#160;&#160;0x0002</td></tr>
<tr class="memdesc:ae586ae1d0b4f633f9a23bd7ec23d33ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wakeup source IO10 Mask.  <a href="#ae586ae1d0b4f633f9a23bd7ec23d33ee">More...</a><br /></td></tr>
<tr class="separator:ae586ae1d0b4f633f9a23bd7ec23d33ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a692a04e5674bbbd345d4f9f3a9f3f3f8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sleep_8h.html#a692a04e5674bbbd345d4f9f3a9f3f3f8">WAKEUP_IO11</a>&#160;&#160;&#160;0x0004</td></tr>
<tr class="memdesc:a692a04e5674bbbd345d4f9f3a9f3f3f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wakeup source IO11 Mask.  <a href="#a692a04e5674bbbd345d4f9f3a9f3f3f8">More...</a><br /></td></tr>
<tr class="separator:a692a04e5674bbbd345d4f9f3a9f3f3f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a0e8a6a8a9fffcf723cbe981b1f0117"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sleep_8h.html#a5a0e8a6a8a9fffcf723cbe981b1f0117">WAKEUP_IO12</a>&#160;&#160;&#160;0x0008</td></tr>
<tr class="memdesc:a5a0e8a6a8a9fffcf723cbe981b1f0117"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wakeup source IO12 Mask.  <a href="#a5a0e8a6a8a9fffcf723cbe981b1f0117">More...</a><br /></td></tr>
<tr class="separator:a5a0e8a6a8a9fffcf723cbe981b1f0117"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74160b75b83d6b90039a6192d56f07cc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sleep_8h.html#a74160b75b83d6b90039a6192d56f07cc">WAKEUP_IO13</a>&#160;&#160;&#160;0x0010</td></tr>
<tr class="memdesc:a74160b75b83d6b90039a6192d56f07cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wakeup source IO13 Mask.  <a href="#a74160b75b83d6b90039a6192d56f07cc">More...</a><br /></td></tr>
<tr class="separator:a74160b75b83d6b90039a6192d56f07cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8811a7e7c7e8b382fd579e42ebe42b14"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sleep_8h.html#a8811a7e7c7e8b382fd579e42ebe42b14">WAKEUP_SLEEP_TIMER1</a>&#160;&#160;&#160;0x0020</td></tr>
<tr class="memdesc:a8811a7e7c7e8b382fd579e42ebe42b14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wakeup source Blue block Sleep Timer 1.  <a href="#a8811a7e7c7e8b382fd579e42ebe42b14">More...</a><br /></td></tr>
<tr class="separator:a8811a7e7c7e8b382fd579e42ebe42b14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a305b5752b6e904780be3477bb9f6c039"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sleep_8h.html#a305b5752b6e904780be3477bb9f6c039">WAKEUP_SLEEP_TIMER2</a>&#160;&#160;&#160;0x0040</td></tr>
<tr class="memdesc:a305b5752b6e904780be3477bb9f6c039"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wakeup source Blue block Sleep Timer 2.  <a href="#a305b5752b6e904780be3477bb9f6c039">More...</a><br /></td></tr>
<tr class="separator:a305b5752b6e904780be3477bb9f6c039"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bcb6c11e75505266e93964e21b7a0af"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sleep_8h.html#a1bcb6c11e75505266e93964e21b7a0af">WAKEUP_BOR</a>&#160;&#160;&#160;0x0080</td></tr>
<tr class="memdesc:a1bcb6c11e75505266e93964e21b7a0af"><td class="mdescLeft">&#160;</td><td class="mdescRight">The Reset reason is not caused from a wakeup source but from a BOR reset.  <a href="#a1bcb6c11e75505266e93964e21b7a0af">More...</a><br /></td></tr>
<tr class="separator:a1bcb6c11e75505266e93964e21b7a0af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad31f1d0e77472142ec596d23cc93b47"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sleep_8h.html#aad31f1d0e77472142ec596d23cc93b47">WAKEUP_POR</a>&#160;&#160;&#160;0x0100</td></tr>
<tr class="memdesc:aad31f1d0e77472142ec596d23cc93b47"><td class="mdescLeft">&#160;</td><td class="mdescRight">The Reset reason is not caused from a wakeup source but from a POR reset.  <a href="#aad31f1d0e77472142ec596d23cc93b47">More...</a><br /></td></tr>
<tr class="separator:aad31f1d0e77472142ec596d23cc93b47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb5f095d5003645e5b45448c9ed5e3e7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sleep_8h.html#abb5f095d5003645e5b45448c9ed5e3e7">WAKEUP_SYS_RESET_REQ</a>&#160;&#160;&#160;0x0200</td></tr>
<tr class="memdesc:abb5f095d5003645e5b45448c9ed5e3e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">The Reset reason is not caused from a wakeup source but from a System reset request.  <a href="#abb5f095d5003645e5b45448c9ed5e3e7">More...</a><br /></td></tr>
<tr class="separator:abb5f095d5003645e5b45448c9ed5e3e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a125587aa7bca0540091118efdcfd055b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sleep_8h.html#a125587aa7bca0540091118efdcfd055b">WAKEUP_RESET_WDG</a>&#160;&#160;&#160;0x0400</td></tr>
<tr class="memdesc:a125587aa7bca0540091118efdcfd055b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The Reset reason is not caused from a wakeup source but from a watchdog timer reset.  <a href="#a125587aa7bca0540091118efdcfd055b">More...</a><br /></td></tr>
<tr class="separator:a125587aa7bca0540091118efdcfd055b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28bce64f41051ce78a4574b45132af4e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sleep_8h.html#a28bce64f41051ce78a4574b45132af4e">NO_WAKEUP_RESET</a>&#160;&#160;&#160;0x0000</td></tr>
<tr class="memdesc:a28bce64f41051ce78a4574b45132af4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The Reset reason is not caused from a known wakeup source.  <a href="#a28bce64f41051ce78a4574b45132af4e">More...</a><br /></td></tr>
<tr class="separator:a28bce64f41051ce78a4574b45132af4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad485cab5582db4bf2e52086b4329f002"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sleep_8h.html#ad485cab5582db4bf2e52086b4329f002">WAKEUP_IOx_LOW</a>&#160;&#160;&#160;0x00</td></tr>
<tr class="memdesc:ad485cab5582db4bf2e52086b4329f002"><td class="mdescLeft">&#160;</td><td class="mdescRight">The system wakes up when IOx level is low.  <a href="#ad485cab5582db4bf2e52086b4329f002">More...</a><br /></td></tr>
<tr class="separator:ad485cab5582db4bf2e52086b4329f002"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa956b9ccf0828aa0854522ae281c0d94"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sleep_8h.html#aa956b9ccf0828aa0854522ae281c0d94">WAKEUP_IOx_HIGH</a>&#160;&#160;&#160;0x01</td></tr>
<tr class="memdesc:aa956b9ccf0828aa0854522ae281c0d94"><td class="mdescLeft">&#160;</td><td class="mdescRight">The system wakes up when IOx level is high.  <a href="#aa956b9ccf0828aa0854522ae281c0d94">More...</a><br /></td></tr>
<tr class="separator:aa956b9ccf0828aa0854522ae281c0d94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab10d84aee73997ee00b81a3cb6d6333d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sleep_8h.html#ab10d84aee73997ee00b81a3cb6d6333d">WAKEUP_IO9_SHIFT_MASK</a>&#160;&#160;&#160;0x00</td></tr>
<tr class="memdesc:ab10d84aee73997ee00b81a3cb6d6333d"><td class="mdescLeft">&#160;</td><td class="mdescRight">IO9 wake up shift mask.  <a href="#ab10d84aee73997ee00b81a3cb6d6333d">More...</a><br /></td></tr>
<tr class="separator:ab10d84aee73997ee00b81a3cb6d6333d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac515d758bc78927e480f8de55822c7fc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sleep_8h.html#ac515d758bc78927e480f8de55822c7fc">WAKEUP_IO10_SHIFT_MASK</a>&#160;&#160;&#160;0x01</td></tr>
<tr class="memdesc:ac515d758bc78927e480f8de55822c7fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">IO10 wake up shift mask.  <a href="#ac515d758bc78927e480f8de55822c7fc">More...</a><br /></td></tr>
<tr class="separator:ac515d758bc78927e480f8de55822c7fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e773b022695f2a2b702b416d5115df8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sleep_8h.html#a1e773b022695f2a2b702b416d5115df8">WAKEUP_IO11_SHIFT_MASK</a>&#160;&#160;&#160;0x02</td></tr>
<tr class="memdesc:a1e773b022695f2a2b702b416d5115df8"><td class="mdescLeft">&#160;</td><td class="mdescRight">IO11 wake up shift mask.  <a href="#a1e773b022695f2a2b702b416d5115df8">More...</a><br /></td></tr>
<tr class="separator:a1e773b022695f2a2b702b416d5115df8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a032ffaab52137288cae4493d6698d77d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sleep_8h.html#a032ffaab52137288cae4493d6698d77d">WAKEUP_IO12_SHIFT_MASK</a>&#160;&#160;&#160;0x03</td></tr>
<tr class="memdesc:a032ffaab52137288cae4493d6698d77d"><td class="mdescLeft">&#160;</td><td class="mdescRight">IO12 wakeup shift mask.  <a href="#a032ffaab52137288cae4493d6698d77d">More...</a><br /></td></tr>
<tr class="separator:a032ffaab52137288cae4493d6698d77d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7c720bbde2cccdcd697a2cec935d342"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sleep_8h.html#aa7c720bbde2cccdcd697a2cec935d342">WAKEUP_IO13_SHIFT_MASK</a>&#160;&#160;&#160;0x04</td></tr>
<tr class="memdesc:aa7c720bbde2cccdcd697a2cec935d342"><td class="mdescLeft">&#160;</td><td class="mdescRight">IO13 wake up shift mask.  <a href="#aa7c720bbde2cccdcd697a2cec935d342">More...</a><br /></td></tr>
<tr class="separator:aa7c720bbde2cccdcd697a2cec935d342"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ace58749df14c14b64252eb55f40d2c32"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sleep_8h.html#ace58749df14c14b64252eb55f40d2c32">SleepModes</a> { <a class="el" href="sleep_8h.html#ace58749df14c14b64252eb55f40d2c32a4b1e70cf7dd0396d75a5ef3bc357694a">SLEEPMODE_RUNNING</a> = 0, 
<a class="el" href="sleep_8h.html#ace58749df14c14b64252eb55f40d2c32a98dd44e8e4c7b7af9e3d00c983aa1b36">SLEEPMODE_CPU_HALT</a> = 1, 
<a class="el" href="sleep_8h.html#ace58749df14c14b64252eb55f40d2c32a93af1c45a33be62df00d0ab82ef04128">SLEEPMODE_WAKETIMER</a> = 2, 
<a class="el" href="sleep_8h.html#ace58749df14c14b64252eb55f40d2c32a559adb5abaebc7504743f8684ab16f28">SLEEPMODE_NOTIMER</a> = 3
 }<tr class="memdesc:ace58749df14c14b64252eb55f40d2c32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enumerations for the possible microcontroller sleep modes.  <a href="sleep_8h.html#ace58749df14c14b64252eb55f40d2c32">More...</a><br /></td></tr>
<tr class="separator:ace58749df14c14b64252eb55f40d2c32"><td class="memSeparator" colspan="2">&#160;</td></tr>
</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a994a0b5e3560c9cc573d6a968b183477"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sleep_8h.html#a994a0b5e3560c9cc573d6a968b183477">BlueNRG_Sleep</a> (<a class="el" href="sleep_8h.html#ace58749df14c14b64252eb55f40d2c32">SleepModes</a> sleepMode, uint8_t gpioWakeBitMask, uint8_t gpioWakeLevelMask)</td></tr>
<tr class="memdesc:a994a0b5e3560c9cc573d6a968b183477"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function allows to put the BlueNRG in low power state.  <a href="#a994a0b5e3560c9cc573d6a968b183477">More...</a><br /></td></tr>
<tr class="separator:a994a0b5e3560c9cc573d6a968b183477"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44fa359e8088200579bab40b7d67928a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sleep_8h.html#ace58749df14c14b64252eb55f40d2c32">SleepModes</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sleep_8h.html#a44fa359e8088200579bab40b7d67928a">App_SleepMode_Check</a> (<a class="el" href="sleep_8h.html#ace58749df14c14b64252eb55f40d2c32">SleepModes</a> sleepMode)</td></tr>
<tr class="memdesc:a44fa359e8088200579bab40b7d67928a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function allows the application to define its desired sleep mode.  <a href="#a44fa359e8088200579bab40b7d67928a">More...</a><br /></td></tr>
<tr class="separator:a44fa359e8088200579bab40b7d67928a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdf44d45bba76d4087f080c558d5d5a2"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sleep_8h.html#acdf44d45bba76d4087f080c558d5d5a2">BlueNRG_WakeupSource</a> (void)</td></tr>
<tr class="memdesc:acdf44d45bba76d4087f080c558d5d5a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the wakeup source from reset. Possible value can be a combination of the :  <a href="#acdf44d45bba76d4087f080c558d5d5a2">More...</a><br /></td></tr>
<tr class="separator:acdf44d45bba76d4087f080c558d5d5a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Header file for BlueNRG-1,2 Sleep management. </p>
<p>BlueNRG Sleep management.</p>
<dl class="section author"><dt>Author</dt><dd>AMS - RF Application team </dd></dl>
<dl class="section version"><dt>Version</dt><dd>V1.2.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>12-December-2018 </dd></dl>
<dl class="section attention"><dt>Attention</dt><dd></dd></dl>
<p>THE PRESENT FIRMWARE WHICH IS FOR GUIDANCE ONLY AIMS AT PROVIDING CUSTOMERS WITH CODING INFORMATION REGARDING THEIR PRODUCTS IN ORDER FOR THEM TO SAVE TIME. AS A RESULT, STMICROELECTRONICS SHALL NOT BE HELD LIABLE FOR ANY DIRECT, INDIRECT OR CONSEQUENTIAL DAMAGES WITH RESPECT TO ANY CLAIMS ARISING FROM THE CONTENT OF SUCH FIRMWARE AND/OR THE USE MADE BY CUSTOMERS OF THE CODING INFORMATION CONTAINED HEREIN IN CONNECTION WITH THEIR PRODUCTS.</p>
<h2><center>&copy; COPYRIGHT 2018 STMicroelectronics</center></h2>
<h1><a class="anchor" id="Library"></a>
BlueNRG-1, BlueNRG-2 Low Power management</h1>
<ul>
<li>The BlueNRG-1, BlueNRG-2 low power software combines the low power requests coming from the application with the radio operating mode, choosing the best low power mode applicable in the current scenario.<ul>
<li>This negotiation between the radio module and the application requests prevents data loss and it is performed by the low power software APIs. User is requested to call the <a class="el" href="sleep_8h.html#a994a0b5e3560c9cc573d6a968b183477" title="This function allows to put the BlueNRG in low power state. ">BlueNRG_Sleep(SleepModes sleepMode, uint8_t gpioWakeBitMask, uint8_t gpioWakeLevelMask)</a> API.</li>
<li>Refer to AN4820 "BlueNRG-1 and BlueNRG-2 low power modes" document for detailed description about the devices HW low power modes and SW support.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="Sleep_API"></a>
How BlueNRG_Sleep() API works?</h1>
<ul>
<li><a class="el" href="sleep_8h.html#a994a0b5e3560c9cc573d6a968b183477" title="This function allows to put the BlueNRG in low power state. ">BlueNRG_Sleep(SleepModes sleepMode, uint8_t gpioWakeBitMask, uint8_t gpioWakeLevelMask)</a> must be called on main application while loop, with selected sleep mode (SLEEPMODE_RUNNING, SLEEPMODE_CPU_HALT,SLEEPMODE_WAKETIMER,SLEEPMODE_NOTIMER), gpio bit masks and level for selecting the external wakup source if applicable.<ul>
<li><a class="el" href="sleep_8h.html#a994a0b5e3560c9cc573d6a968b183477" title="This function allows to put the BlueNRG in low power state. ">BlueNRG_Sleep()</a> API sets the actual sleep mode value (sleepMode_allowed variable) as combination of following components:<ul>
<li><a class="el" href="sleep_8h.html#a994a0b5e3560c9cc573d6a968b183477" title="This function allows to put the BlueNRG in low power state. ">BlueNRG_Sleep()</a> sleepMode parameter value</li>
<li>user sleep mode provided within <a class="el" href="sleep_8h.html#a44fa359e8088200579bab40b7d67928a" title="This function allows the application to define its desired sleep mode. ">App_SleepMode_Check()</a> function</li>
<li>BLE Stack sleep mode returned from BlueNRG_Stack_Perform_Deep_Sleep_Check() function.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>sleepMode_allowed value determines actual sleep mode and associated actions:</p><ul>
<li>SLEEPMODE_RUNNING:<ul>
<li>It just reenables global interrupt operations (nothing else to be done);</li>
</ul>
</li>
<li>SLEEPMODE_CPU_HALT:<ul>
<li>__WFI() is called: it executes a wait for interrupt instruction and suspends the core execution until one of a number of events occurs.</li>
<li>Global interrupt operations are re-enabled.</li>
</ul>
</li>
<li>SLEEPMODE_WAKETIMER, SLEEPMODE_NOTIMER:<ul>
<li>BlueNRG_InternalSleep(sleepMode_allowed, gpioWakeBitMask) is called, after wakeup sources setup.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="Sleep_Modes"></a>
How BlueNRG_InternalSleep() API works? (SLEEPMODE_WAKETIMER, SLEEPMODE_NOTIMER sleep modes)</h1>
<pre class="fragment">- When the BlueNRG-1 and BlueNRG-2 exit from SLEEPMODE_WAKETIMER, SLEEPMODE_NOTIMER low power mode a reset occurs: all the
    peripherals configuration and the application context are lost.
  - The BlueNRG_InternalSleep() API implements a mechanism to save and restore all the peripheral configuration and the application context when a power save procedure is called.

  - BlueNRG_InternalSleep(sleepMode_allowed, gpioWakeBitMask) performs the following main operations in order to enter in sleep mode (SLEEPMODE_WAKETIMER, SLEEPMODE_NOTIMER)  and restore context:

    - Save the peripherals registers configurations on dedicated variables: System Control, FLASH CONFIG, NVIC, CKGEN, GPIO, UART, SPI, I2C, RNG, RNG, RTC, MFTX, SysTick, WDT, DMA, ADC, PKA.
    - Enable deep sleep: SystemSleepCmd(ENABLE);
    - Save the context by calling the calling the CS_contextSave() function on context_switch.s file.

  - When BlueNRG-1 and BlueNRG-2 exit from SLEEPMODE_WAKETIMER, SLEEPMODE_NOTIMER low power mode due to a wakeup reason, a reset occurs. The following main operations are done:

    - On reset the __low_level_init() function is called which checks the reset reason:
       - Since the reset reason is a wakeup from sleep, it restores the context by calling the CS_contextRestore() function on context_switch.s file.             
    - Disable deep sleep (SystemSleepCmd(DISABLE))
    - Restore the peripherals registers configuration previously saved on dedicated variables  FLASH CONFIG, NVIC, CKGEN, UART, SPI, I2C, RNG, RNG, RTC, MFTX, SysTick, WDT, DMA, ADC, PKA.

    - NOTE: From the application point of view, the exit from a low power procedure is fully transparent: when a wakeup from low power occurs, the CPU executes the next instruction after the low power function call.
</pre><h1><a class="anchor" id="Wakeup_WFI"></a>
How to properly handle device entering in the Sleep mode with a wakeup source from GPIO active?</h1>
<pre class="fragment">If the user application wants to enter in sleep mode (SLEEPMODE_WAKETIMER or SLEEPMODE_NOTIMER) and starts the sleep procedure with a wakeup source
from GPIO already active, the system does not switch the power management off and remains blocked in the WFI instruction until an interrupt occurs. 
In this context, if other defined wakeup sources occur, they are ignored. The only way to restart the code execution is through an interrupt occurring from any peripheral. 
In addition to user specific needs, it is MANDATORY to enable, at NVIC level and GPIO level, the interrupt associated with the GPIO wakeup sources as follow:
  - If wakeup source level is LOW, the associated IRQ level must be on falling edge (IRQ_ON_FALLING_EDGE);
  - If wakeup source level is HIGH, the associated IRQ level must be on rising edge (IRQ_ON_RISING_EDGE). 
The GPIO handler should handle also the interrupt associated with the edges, by clearing the interrupt cause. 
If the application needs also GPIO interrupt on the other edge, it could enable both edges and discard the edge not needed in the GPIO handler. 

- Example: let's assume the wakeup source is IO13 with LOW level and no specific interrupt is enabled and associated to this IO at application level. 
           User must enable, at NVIC level, the interrupt on IO13 with IRQ level on falling edge.

  - while (1) {
        BTLE_StackTick();

        wakeup_source = WAKEUP_IO13;
        wakeup_level = (WAKEUP_IO_LOW &lt;&lt; WAKEUP_IO13);  

        &lt;enable IO13 interrupt with IRQ level on falling edge since wakeup level is LOW (IRQ_ON_FALLING_EDGE)&gt;

        BlueNRG_Sleep(SLEEPMODE_NOTIMER, wakeup_source, wakeup_level, 0);
      }
</pre><h1><a class="anchor" id="Wakeup_Reason"></a>
How to properly handle a wakeup source from a wakeup GPIO (IO9, 10,11,12,13) for which an interrupt is also expected ?</h1>
<pre class="fragment">When in sleep mode, if a wakeup with associated IRQ handler occurs on a wakeup IO, the device is waked up, but the related IO user operations on associated IRQ handler cannot be properly handled.
This is due to the fact that an event on such IO allows to wake up the device in sleep mode, but, since the GPIO peripheral is in sleep mode, the associated IT pending bit is not set. 
As consequence, on associated GpioHandler(), user application is not able to correctly check the IT pending bit and perform the related operations. 

After existing from sleep mode, the following checks on associated IO handler (GpioHandler()) must be performed:

- use wakeupFromSleepFlag flag to verify that device actually exits from sleep mode and check if the wakeup source is the one associated to the specific IO (by using BlueNRG_WakeupSource() API). 

- Example: let's assume the wakeup source is IO12 and user application requires to perform specific operations on associated IRQ function (GPIO_handler()).

    - On main application user enables the  sleep mode by setting IO12 as wakeup source: 

      BlueNRG_Sleep(SLEEPMODE_WAKETIMER,WAKEUP_I12,WAKEUP_IOx_LOW&lt;&lt; WAKEUP_I12_SHIFT_MASK);    

    - On BlueNRG1_it.c, the following changes must be applied on GPIO_Handler() function:

       void GPIO_Handler(void)
       {
          if ((GPIO_GetITPendingBit(GPIO_Pin_12) == SET) || ((wakeupFromSleepFlag) &amp;&amp; (BlueNRG_WakeupSource() &amp; WAKEUP_IO12)))
          {
              GPIO_ClearITPendingBit(GPIO_Pin_12);

              ... //User code to be executed when IRQ on IO12 occurs
          }
       }</pre>
<p>Definition in file <a class="el" href="sleep_8h_source.html">sleep.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a28bce64f41051ce78a4574b45132af4e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NO_WAKEUP_RESET&#160;&#160;&#160;0x0000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The Reset reason is not caused from a known wakeup source. </p>

<p>Definition at line <a class="el" href="sleep_8h_source.html#l00190">190</a> of file <a class="el" href="sleep_8h_source.html">sleep.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1bcb6c11e75505266e93964e21b7a0af"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WAKEUP_BOR&#160;&#160;&#160;0x0080</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The Reset reason is not caused from a wakeup source but from a BOR reset. </p>

<p>Definition at line <a class="el" href="sleep_8h_source.html#l00178">178</a> of file <a class="el" href="sleep_8h_source.html">sleep.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae586ae1d0b4f633f9a23bd7ec23d33ee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WAKEUP_IO10&#160;&#160;&#160;0x0002</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wakeup source IO10 Mask. </p>

<p>Definition at line <a class="el" href="sleep_8h_source.html#l00160">160</a> of file <a class="el" href="sleep_8h_source.html">sleep.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac515d758bc78927e480f8de55822c7fc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WAKEUP_IO10_SHIFT_MASK&#160;&#160;&#160;0x01</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>IO10 wake up shift mask. </p>

<p>Definition at line <a class="el" href="sleep_8h_source.html#l00202">202</a> of file <a class="el" href="sleep_8h_source.html">sleep.h</a>.</p>

</div>
</div>
<a class="anchor" id="a692a04e5674bbbd345d4f9f3a9f3f3f8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WAKEUP_IO11&#160;&#160;&#160;0x0004</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wakeup source IO11 Mask. </p>

<p>Definition at line <a class="el" href="sleep_8h_source.html#l00163">163</a> of file <a class="el" href="sleep_8h_source.html">sleep.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1e773b022695f2a2b702b416d5115df8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WAKEUP_IO11_SHIFT_MASK&#160;&#160;&#160;0x02</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>IO11 wake up shift mask. </p>

<p>Definition at line <a class="el" href="sleep_8h_source.html#l00205">205</a> of file <a class="el" href="sleep_8h_source.html">sleep.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5a0e8a6a8a9fffcf723cbe981b1f0117"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WAKEUP_IO12&#160;&#160;&#160;0x0008</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wakeup source IO12 Mask. </p>

<p>Definition at line <a class="el" href="sleep_8h_source.html#l00166">166</a> of file <a class="el" href="sleep_8h_source.html">sleep.h</a>.</p>

</div>
</div>
<a class="anchor" id="a032ffaab52137288cae4493d6698d77d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WAKEUP_IO12_SHIFT_MASK&#160;&#160;&#160;0x03</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>IO12 wakeup shift mask. </p>

<p>Definition at line <a class="el" href="sleep_8h_source.html#l00208">208</a> of file <a class="el" href="sleep_8h_source.html">sleep.h</a>.</p>

</div>
</div>
<a class="anchor" id="a74160b75b83d6b90039a6192d56f07cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WAKEUP_IO13&#160;&#160;&#160;0x0010</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wakeup source IO13 Mask. </p>

<p>Definition at line <a class="el" href="sleep_8h_source.html#l00169">169</a> of file <a class="el" href="sleep_8h_source.html">sleep.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa7c720bbde2cccdcd697a2cec935d342"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WAKEUP_IO13_SHIFT_MASK&#160;&#160;&#160;0x04</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>IO13 wake up shift mask. </p>

<p>Definition at line <a class="el" href="sleep_8h_source.html#l00211">211</a> of file <a class="el" href="sleep_8h_source.html">sleep.h</a>.</p>

</div>
</div>
<a class="anchor" id="a56b318174ac7af7e01778be3d2e5810e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WAKEUP_IO9&#160;&#160;&#160;0x0001</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wakeup source IO9 Mask. </p>

<p>Definition at line <a class="el" href="sleep_8h_source.html#l00157">157</a> of file <a class="el" href="sleep_8h_source.html">sleep.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab10d84aee73997ee00b81a3cb6d6333d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WAKEUP_IO9_SHIFT_MASK&#160;&#160;&#160;0x00</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>IO9 wake up shift mask. </p>

<p>Definition at line <a class="el" href="sleep_8h_source.html#l00199">199</a> of file <a class="el" href="sleep_8h_source.html">sleep.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa956b9ccf0828aa0854522ae281c0d94"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WAKEUP_IOx_HIGH&#160;&#160;&#160;0x01</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The system wakes up when IOx level is high. </p>

<p>Definition at line <a class="el" href="sleep_8h_source.html#l00196">196</a> of file <a class="el" href="sleep_8h_source.html">sleep.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad485cab5582db4bf2e52086b4329f002"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WAKEUP_IOx_LOW&#160;&#160;&#160;0x00</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The system wakes up when IOx level is low. </p>

<p>Definition at line <a class="el" href="sleep_8h_source.html#l00193">193</a> of file <a class="el" href="sleep_8h_source.html">sleep.h</a>.</p>

</div>
</div>
<a class="anchor" id="aad31f1d0e77472142ec596d23cc93b47"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WAKEUP_POR&#160;&#160;&#160;0x0100</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The Reset reason is not caused from a wakeup source but from a POR reset. </p>

<p>Definition at line <a class="el" href="sleep_8h_source.html#l00181">181</a> of file <a class="el" href="sleep_8h_source.html">sleep.h</a>.</p>

</div>
</div>
<a class="anchor" id="a125587aa7bca0540091118efdcfd055b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WAKEUP_RESET_WDG&#160;&#160;&#160;0x0400</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The Reset reason is not caused from a wakeup source but from a watchdog timer reset. </p>

<p>Definition at line <a class="el" href="sleep_8h_source.html#l00187">187</a> of file <a class="el" href="sleep_8h_source.html">sleep.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8811a7e7c7e8b382fd579e42ebe42b14"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WAKEUP_SLEEP_TIMER1&#160;&#160;&#160;0x0020</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wakeup source Blue block Sleep Timer 1. </p>

<p>Definition at line <a class="el" href="sleep_8h_source.html#l00172">172</a> of file <a class="el" href="sleep_8h_source.html">sleep.h</a>.</p>

</div>
</div>
<a class="anchor" id="a305b5752b6e904780be3477bb9f6c039"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WAKEUP_SLEEP_TIMER2&#160;&#160;&#160;0x0040</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wakeup source Blue block Sleep Timer 2. </p>

<p>Definition at line <a class="el" href="sleep_8h_source.html#l00175">175</a> of file <a class="el" href="sleep_8h_source.html">sleep.h</a>.</p>

</div>
</div>
<a class="anchor" id="abb5f095d5003645e5b45448c9ed5e3e7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WAKEUP_SYS_RESET_REQ&#160;&#160;&#160;0x0200</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The Reset reason is not caused from a wakeup source but from a System reset request. </p>

<p>Definition at line <a class="el" href="sleep_8h_source.html#l00184">184</a> of file <a class="el" href="sleep_8h_source.html">sleep.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="ace58749df14c14b64252eb55f40d2c32"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="sleep_8h.html#ace58749df14c14b64252eb55f40d2c32">SleepModes</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enumerations for the possible microcontroller sleep modes. </p>
<ul>
<li>SLEEPMODE_RUNNING Everything is active and running. In practice this mode is not used, but it is defined for completeness of information.</li>
<li>SLEEPMODE_CPU_HALT Only the CPU is halted. The rest of the chip continues running normally. The chip will wake from any interrupt.</li>
<li>SLEEPMODE_WAKETIMER The device is in deep sleep and the timer clock sources remain running. Wakeup is possible from both GPIO and the Hal Virtual Timers.</li>
<li>SLEEPMODE_NOTIMER The device is in deep sleep. All the peripherals and clock sources are turned off. Wakeup is possible only from GPIOs IO9-IO10-IO11-IO12-IO13. </li>
</ul>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="ace58749df14c14b64252eb55f40d2c32a4b1e70cf7dd0396d75a5ef3bc357694a"></a>SLEEPMODE_RUNNING&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ace58749df14c14b64252eb55f40d2c32a98dd44e8e4c7b7af9e3d00c983aa1b36"></a>SLEEPMODE_CPU_HALT&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ace58749df14c14b64252eb55f40d2c32a93af1c45a33be62df00d0ab82ef04128"></a>SLEEPMODE_WAKETIMER&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ace58749df14c14b64252eb55f40d2c32a559adb5abaebc7504743f8684ab16f28"></a>SLEEPMODE_NOTIMER&#160;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="sleep_8h_source.html#l00149">149</a> of file <a class="el" href="sleep_8h_source.html">sleep.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a44fa359e8088200579bab40b7d67928a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sleep_8h.html#ace58749df14c14b64252eb55f40d2c32">SleepModes</a> App_SleepMode_Check </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sleep_8h.html#ace58749df14c14b64252eb55f40d2c32">SleepModes</a>&#160;</td>
          <td class="paramname"><em>sleepMode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function allows the application to define its desired sleep mode. </p>
<p>The App_SleepMode_Check allows the application to set its desired sleep mode based on the application power management policy. When user calls <a class="el" href="sleep_8h.html#a994a0b5e3560c9cc573d6a968b183477">BlueNRG_Sleep</a>, a negotiation occurs to define the sleep mode and this function is called to get inputs from application. It is important to notice that this function is executed with interrupts disabled</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sleepMode</td><td>Sleep mode (see SleepModes enum)</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Return</td><td>the sleep mode possible and safe from the application point of view</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>A weak implementation always returning SLEEPMODE_NOTIMER is provided as default when no application specifc behaviour is required. </dd></dl>

</div>
</div>
<a class="anchor" id="a994a0b5e3560c9cc573d6a968b183477"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t BlueNRG_Sleep </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sleep_8h.html#ace58749df14c14b64252eb55f40d2c32">SleepModes</a>&#160;</td>
          <td class="paramname"><em>sleepMode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>gpioWakeBitMask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>gpioWakeLevelMask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function allows to put the BlueNRG in low power state. </p>
<p>This function allows to enter a desired sleep mode that is negotiated between BTLE stack needs and application needs. The application can provide the desired sleep mode using the parameter sleepMode. In addition to this, the application can optionally use the <a class="el" href="sleep_8h.html#a44fa359e8088200579bab40b7d67928a">App_SleepMode_Check</a> to provide its desired sleep mode. The function will compute the sleep mode by combining the different requests and choosing the lowest possible power mode.</p>
<p>The device can be configured with different wake sources according to the sleepMode parameter. The lowest power mode is obtained configuring the device in SLEEPMODE_NOTIMER. For all sleep modes, <a class="el" href="sleep_8h.html#a994a0b5e3560c9cc573d6a968b183477" title="This function allows to put the BlueNRG in low power state. ">BlueNRG_Sleep()</a> will return when the wakeup occours.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sleepMode</td><td>Sleep mode (see SleepModes enum)</td></tr>
    <tr><td class="paramname">gpioWakeBitMask</td><td>A bit mask of the GPIO that are allowed to wake the chip from deep sleep. A high bit in the mask will enable waking the chip if the corresponding GPIO changes state. bit0 is IO9, bit1 is IO10, bit2 is IO11, bit3 is IO12, bit4 is IO13, bits[5:7] are ignored. If this param is 0 the wakeup GPIO are ignored </td></tr>
    <tr><td class="paramname">gpioWakeLevelMask</td><td>A mask used to setup the active wakeup level:<ul>
<li>0: the system wakes up when IO is low</li>
<li>1: the system wakes up when IO is high The level sensitive bit mask is the same of the gpioWakeBitMask parameter.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Status</td><td>of the call </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="acdf44d45bba76d4087f080c558d5d5a2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t BlueNRG_WakeupSource </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the wakeup source from reset. Possible value can be a combination of the : </p>
<ul>
<li>WAKEUP_IO9</li>
<li>WAKEUP_IO10</li>
<li>WAKEUP_IO11</li>
<li>WAKEUP_IO12</li>
<li>WAKEUP_IO13</li>
<li>WAKEUP_SLEEP_TIMER1</li>
<li>WAKEUP_SLEEP_TIMER2</li>
<li>WAKEUP_BOR</li>
<li>WAKEUP_POR</li>
<li>WAKEUP_SYS_RESET_REQ</li>
<li>WAKEUP_RESET_WDG</li>
<li>NO_WAKEUP_RESET </li>
</ul>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Copyright &copy; 2020 by STMicrolectronics. All rights reserved.<br>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
