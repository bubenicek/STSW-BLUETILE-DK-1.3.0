<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>BlueNRG-1,2 Development kits (STSW-BLUENRG1-DK): 2) Design, Develop and Test BLE applications using BlueNRG-1,2 development kits</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="STcustom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ST-logo-small.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BlueNRG-1,2 Development kits (STSW-BLUENRG1-DK)
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">2) Design, Develop and Test BLE applications using BlueNRG-1,2 development kits </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="S2"></a>
First Option: use BlueNRG GUI PC application and script launcher for running scripts</h1>
<ul>
<li>BlueNRG GUI PC application allows user to directly test a specific BLE scenario using the available set of BlueNRG-1,2 <b>BlueNRG-BLE Stack Library </b><a href="../BlueNRG1_aci_events/bluenrg1__api_8h.html">API commands</a> and getting stack <a href="../BlueNRG1_aci_events/bluenrg1__events_8h.html">events </a> </li>
<li>Further, BlueNRG GUI allows to load and run a python script built using the available set of BlueNRG-1,2 BLE stack <a href="../BlueNRG1_aci_events/bluenrg1__api_8h.html">API commands</a> and related <a href="../BlueNRG1_aci_events/bluenrg1__events_8h.html">events </a>: <ul>
<li>
User can design, implement and play with the key features of its specific BLE application scenario without the need to move to any FW development code using a specific IDE. </li>
<li>
Once the BLE scenario has been designed and proved, user can then move to the C code porting and related testing, saving time and reducing the risk of application not well working. </li>
</ul>
</li>
<li>NOTEs: <ul>
<li>
BlueNRG GUI PC application is available on <a href="http://www.st.com/content/st_com/en/products/embedded-software/wireless-connectivity-software/wireless-connectivity-software/stsw-bnrgui.html">STSW-BNRGUI SW package</a> web page (GET SOFTWARE section). </li>
<li>
User is requested to program the <a href="http://www.st.com/content/st_com/en/products/evaluation-tools/solution-evaluation-tools/communication-and-connectivity-solution-eval-boards/steval-idb007v2.html">BlueNRG-1, STEVAL-IDB007V2 </a>development kit with the Firmware\DTM\BlueNRG1\DTM_UART.hex binary image, or a <a href="http://www.st.com/content/st_com/en/products/evaluation-tools/solution-evaluation-tools/communication-and-connectivity-solution-eval-boards/steval-idb008v1.html">BlueNRG-2, STEVAL-IDB008V1</a>, <a href="http://www.st.com/content/st_com/en/products/evaluation-tools/solution-evaluation-tools/communication-and-connectivity-solution-eval-boards/steval-idb008v2.html">BlueNRG-2, STEVAL-IDB008V2</a>, <a href="https://www.st.com/content/st_com/en/products/evaluation-tools/solution-evaluation-tools/communication-and-connectivity-solution-eval-boards/steval-idb009v1.html">BlueNRG-248, STEVAL-IDB009V1</a> platform with the Firmware\DTM\BlueNRG2\DTM_UART.hex binary image, as follow: <ol>
<li>
Connect the selected board to a PC USB port </li>
<li>
On PC Computer Window, use the the "drag and drop" mass storage upgrade capability for copying the selected binary image into the associated IDB007/8/9VX platform. <table  border="0">
<tr>
<th></th></tr>
<tr>
<td><div class="image">
<img src="Figure_3.png" />
</div>
   </td></tr>
<tr align="center">
<td><b style="font-size: 18px; color:blue;"> Figure 3: Drag and Drop upgrade </b>  </td></tr>
</table>
</li>
</ol>
<ul>
<li>
Alternatively, open the <a href="#flasher">BlueNRG-1,2 Flasher Utility </a> tool available on <a href="http://www.st.com/content/st_com/en/products/embedded-software/wireless-connectivity-software/stsw-bnrgflasher.html">STSW-BNRGFLASHER SW package</a> web page (from Start menu folder, ST BlueNRG-1_2 Flasher Utility x.x.x) </li>
<li>
On UART tab, select the COM port associated to the selected platform </li>
<li>
On UART tab, select the specific DTM binary file through the Select Image file button </li>
<li>
On UART tab, select Mass erase option </li>
<li>
Press Flash button for programming the device </li>
</ul>
</li>
<li>
User should make sure that the <a href="../USB-to-SERIAL_FW_upgrade_procedure/USB-to-SERIAL_FW_upgrade_procedure.html">USB-to-SERIAL firmware</a> is upgraded on STEVAL-IDB007Vx (x=1,1M,2), STEVAL-IDB008Vx (x=1,2), STEVAL-IDB009Vx (x=1) platforms to the latest available version by using the related procedure. </li>
</ul>
</li>
</ul>
<ul>
<li><b> How to run a script? </b> On <a href="http://www.st.com/content/st_com/en/products/embedded-software/wireless-connectivity-software/wireless-connectivity-software/stsw-bnrgui.html">BlueNRG GUI tool, </a> Scripts window, select the script through the Browse... button and then click on the Run Script button.</li>
</ul>
<table  border="0">
<tr>
<th></th></tr>
<tr>
<td><div class="image">
<img src="Figure_4.png" />
</div>
   </td></tr>
<tr align="center">
<td><b style="font-size: 18px; color:blue;"> Figure 4: BlueNRG GUI PC application: run BLE Beacon script example </b>  </td></tr>
</table>
<ul>
<li>Reference scripts examples (Beacon, Simultaneously Master/Slave, Multiple Connections, Security with Pass Key method, OTA client, Sensor Demo Central role, ...) are available on <a href="http://www.st.com/content/st_com/en/products/embedded-software/wireless-connectivity-software/wireless-connectivity-software/stsw-bnrgui.html">STSW-BNRGUI SW package</a> within the folder Application//scripts.</li>
</ul>
<table  border="0">
<tr>
<th></th></tr>
<tr>
<td><div class="image">
<img src="Figure_5.png" />
</div>
   </td></tr>
<tr align="center ">
<td><b style="font-size: 18px; color:blue;"> Figure 5: BlueNRG GUI, BLE Beacon script example </b>  </td></tr>
</table>
<ul>
<li>User can make its own script based on one of the reference script which is closer to his BLE application scenario. Once the specific BLE scenario has been tested and proved on BlueNRG GUI and scripts context, user can generated the associated C code framework with header, sources files and IDE projects by using the Save As C Code feature available on <a href="http://www.st.com/content/st_com/en/products/embedded-software/wireless-connectivity-software/wireless-connectivity-software/stsw-bnrgui.html">BlueNRG GUI</a> SW tool (from menu File, Save As C Code... item). This allow to generate a complete IDE projects framework within the <a href="http://www.st.com/content/st_com/en/products/embedded-software/evaluation-tool-software/stsw-bluenrg1-dk.html">BlueNRG-1_2 SW package (STSW-BLUENRG1-DK)</a></li>
</ul>
<table  border="0">
<tr>
<th></th></tr>
<tr>
<td><div class="image">
<img src="Figure_6.png" />
</div>
   </td></tr>
<tr align="center">
<td><b style="font-size: 18px; color:blue;"> Figure 6: BlueNRG GUI: Save As C Code... </b>  </td></tr>
</table>
<p>User can also move to available BLE examples provided within the <a href="http://www.st.com/content/st_com/en/products/embedded-software/evaluation-tool-software/stsw-bluenrg1-dk.html">BlueNRG-1_2 DK SW package </a> (refer to the <a href="#second_option">Second Option: move to SW development environment starting from available BLE examples</a>).</p>
<ul>
<li>NOTE: The script launcher PC application (BlueNRG_Script_Launcher.exe) is a standalone utility allowing to run a script without the need to use the BlueNRG GUI. It is available on <a href="http://www.st.com/content/st_com/en/products/embedded-software/wireless-connectivity-software/wireless-connectivity-software/stsw-bnrgui.html">STSW-BNRGUI SW package</a> within the folder Application.</li>
</ul>
<ul>
<li>Refer to the <a href="http://www.st.com/resource/en/user_manual/dm00286976.pdf">BlueNRG GUI SW package (STSW-BNRGUI) User Manual (UM2058)</a>, GUI main window and GUI scripts window sections for more <a class="anchor" id="second_option"></a> detailed information.</li>
</ul>
<h1><a class="anchor" id="S2_1"></a>
Second option: move to SW development environment starting from available BLE examples</h1>
<ul>
<li><a href="http://www.st.com/content/st_com/en/products/embedded-software/evaluation-tool-software/stsw-bluenrg1-dk.html">BlueNRG-1_2 DK SW package </a>provides a set of BLE demonstrations applications allowing to test several applications scenarios which can be easily selected and downloaded on a <a href="http://www.st.com/content/st_com/en/products/evaluation-tools/solution-evaluation-tools/communication-and-connectivity-solution-eval-boards/steval-idb007v2.html">BlueNRG-1, STEVAL-IDB007V2 </a>development kit, or a <a href="http://www.st.com/content/st_com/en/products/evaluation-tools/solution-evaluation-tools/communication-and-connectivity-solution-eval-boards/steval-idb008v1.html">BlueNRG-2, STEVAL-IDB008V1</a>, <a href="http://www.st.com/content/st_com/en/products/evaluation-tools/solution-evaluation-tools/communication-and-connectivity-solution-eval-boards/steval-idb008v2.html">BlueNRG-2, STEVAL-IDB008V2</a>, <a href="https://www.st.com/content/st_com/en/products/evaluation-tools/solution-evaluation-tools/communication-and-connectivity-solution-eval-boards/steval-idb009v1.html">BlueNRG-248, STEVAL-IDB009V1</a> platform using the <a href="_section_1.html#navigator">BlueNRG-1,2 Navigator </a> tools (Beacon, Chat, Chat Master and Slave, Power consumption, OTA Reset and Service manager, Remote Control, Sensor Demo and Sensor Demo Central, Throughput, Security). </li>
<li>User can identify which available demonstration application is close to his specific needs and follows such steps: <ul>
<li>
Open its IDE toolchains and related demonstration application project (IAR EWARM for ARM, Keil MDK-ARM, Atollic TrueStudio for ARM toolchains examples are available on <a href="http://www.st.com/content/st_com/en/products/embedded-software/evaluation-tool-software/stsw-bluenrg1-dk.html">BlueNRG-1_2 DK SW package </a>) </li>
<li>
Modify the available source files according to his needs and then download and test the built binary file on the selected platform. </li>
<li>
Run the built application and play with it! </li>
</ul>
</li>
</ul>
<ul>
<li>NOTEs: <ul>
<li>
<a href="http://www.st.com/resource/en/programming_manual/dm00294449.pdf">BlueNRG-1,2 BLE stack programming guidelines (PM0257)</a>, <b>BlueNRG-1,2 BLE stack library APIs and events callbacks overview</b> section: it provides a detailed description of stack APIs and event callbacks framework, BLE stack init and tick APIs. </li>
<li>
<a href="http://www.st.com/resource/en/programming_manual/dm00294449.pdf">BlueNRG-1,2 BLE stack programming guidelines (PM0257)</a>, <b>How to design an application using the BlueNRG-1,2 stack library APIs and events callbacks</b> section: it provides some common BLE uses cases and the associated SW APIs workflow with parameters description. </li>
<li>
<a href="">BlueNRG-1,2 BLE stack programming guidelines (PM0257)</a>, <b>BlueNRG-1,2 BLE stack library APIs and events callbacks overview</b> section: it provides a detailed description of stack APIs and event callbacks framework, BLE stack init and tick APIs. </li>
<li>
Further, the following information are available: <ul>
<li>
<a href="../BlueNRG1_Periph_Drivers/files.html">BlueNRG-1,2 Peripheral Drivers html documentation </a> </li>
<li>
<a href="../BlueNRG1_Periph_Examples/files.html">BlueNRG-1,2 Peripheral Drivers Examples html documentation </a> </li>
<li>
<a href="../BlueNRG1_sdk_drivers/files.html">SDK drivers documentation </a> </li>
<li>
<a href="../BlueNRG1_hal_drivers/files.html">HAL drivers documentation </a> </li>
</ul>
</li>
</ul>
</li>
</ul>
<table  border="0">
<tr>
<th></th></tr>
<tr>
<td><div class="image">
<img src="Figure_7.png" />
</div>
   </td></tr>
<tr align="center">
<td><b style="font-size: 18px; color:blue;"> Figure 7: BlueNRG-1 BLE Beacon IAR project example </b>  </td></tr>
</table>
<ul>
<li>NOTEs: <ul>
<li>
<a class="anchor" id="navigator"></a> BlueNRG-1 Navigator, BlueNRG-2 navigator  provide direct access to each demonstration application project folder. </li>
<li>
The built binary application can be downloaded using the "drag and drop" mass storage upgrade capability </li>
<li>
Alternatively, it can also be downloaded using the BlueNRG-1,2 <a class="anchor" id="flasher"></a> Flasher  Utility application available on <a href="http://www.st.com/content/st_com/en/products/embedded-software/wireless-connectivity-software/stsw-bnrgflasher.html">STSW-BNRGFLASHER SW package</a>. </li>
<li>
This tool uses the internal BlueNRG-1,2 UART bootloader and it just requires a <a href="http://www.st.com/content/st_com/en/products/evaluation-tools/solution-evaluation-tools/communication-and-connectivity-solution-eval-boards/steval-idb007v2.html">BlueNRG-1, STEVAL-IDB007V2 </a>development kit, or a <a href="http://www.st.com/content/st_com/en/products/evaluation-tools/solution-evaluation-tools/communication-and-connectivity-solution-eval-boards/steval-idb008v1.html">BlueNRG-2, STEVAL-IDB008V1</a>, <a href="http://www.st.com/content/st_com/en/products/evaluation-tools/solution-evaluation-tools/communication-and-connectivity-solution-eval-boards/steval-idb008v2.html">BlueNRG-2, STEVAL-IDB008V2</a>, <a href="https://www.st.com/content/st_com/en/products/evaluation-tools/solution-evaluation-tools/communication-and-connectivity-solution-eval-boards/steval-idb009v1.html">BlueNRG-248, STEVAL-IDB009V1</a> platform connected to a PC USB port (no SWD interface is needed). </li>
</ul>
<table  border="0">
<tr>
<th></th></tr>
<tr>
<td><div class="image">
<img src="Figure_8.png" />
</div>
   </td></tr>
<tr align="center">
<td><b style="font-size: 18px; color:blue;"> Figure 8: BlueNRG-1,2 Flasher Utility: BLE Beacon application programming example </b>  </td></tr>
</table>
</li>
</ul>
<h2><a class="anchor" id="S2_1_1"></a>
BlueNRG-1_2 DK BLE reference demonstration applications:</h2>
<ul>
<li>
<b>BLE ANCS </b> application supporting the notification consumer profile role. </li>
<li>
<b>BLE Beacon </b> application. </li>
<li>
<b>BLE Beacon with Flash Management</b> application </li>
<li>
<b>BLE Beacon with FreeRTOS</b> application </li>
<li>
<b>BLE Chat </b> application with GATT client and server role emulating serial communication. </li>
<li>
<b>BLE Chat Master &amp; Slave</b> application (single binary image for both GATT client and server role). </li>
<li>
<b>BLE HID/HOGP Mouse and Keyboard</b> applications. </li>
<li>
<b>BLE Master and Slave with Formula </b> applications (multiple connections scenarios) </li>
<li>
<b>BLE power consumption</b> example. </li>
<li>
<b>BLE Remote Control </b>example. </li>
<li>
<b>BLE Controller Privacy</b> example. </li>
<li>
<b>BLE Security </b>application with Central and Peripeharal roles </li>
<li>
<b>BLE Sensor Demo </b>application with acceleration and environmental sensors values (temperature &amp; pressure). </li>
<li>
<b>BLE Sensor Demo, BlueMS </b>application supporting ST BlueMS smarthphone app. </li>
<li>
<b>BLE Sensor Demo Central </b> which emulates the Sensor Demo applications available for smartphones (IOS and Android). </li>
<li>
<b>BLE Throughput </b> application: unidirectional qnd bidirectional throughput. </li>
<li>
<b>BLE fixed stack</b> example and <b>BLE Sensor demo with fixed stack </b> application. </li>
</ul>
<ul>
<li><b> BLE power consumption</b> application provides a basic example of how measuring power consumption on typical BLE scenarios (advertising, connection). </li>
<li>Refer to the  <a href="../BLE_Examples/files.html">BLE Demonstration application documentation </a> for more detailed information. </li>
<li>BLE demonstration applications are also described on <a href="http://www.st.com/resource/en/user_manual/dm00298232.pdf">BlueNRG-1,2 development kit User Manual (UM2071)</a> </li>
<li>Further, the Over The Air FW upgrade capability is supported on BlueNRG-1 BLE stack v2.1 or later (using modular approach) and on BlueNRG-2 BLE stack v2.x: <ul>
<li>
<b>BLE OTA Reset Manager </b> application for BLE applications using OTA Service and related Characteristics. </li>
<li>
<b>BLE OTA Service Manager </b> application which provides the OTA capability to any application without OTA Service and related Characteristics. </li>
<li>
Refer to the <a href="http://www.st.com/resource/en/application_note/dm00293821.pdf">BLE Over Ther Air Firmware Upgrade (AN4869)</a>, for more detailed information. </li>
</ul>
</li>
</ul>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Copyright &copy; 2020 by STMicrolectronics. All rights reserved.<br>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
